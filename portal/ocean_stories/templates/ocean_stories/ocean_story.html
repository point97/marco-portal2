{% extends "cms_base.html" %}
{% load wagtailcore_tags static icon %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'bower_components/ol3-unofficial/ol.css' %}" />
{% endblock %}

{% block navbar-extra-classes %}navbar-fixed-top{% endblock %}

{% block header %}
    {{ block.super }}
    <div class="map-container">
      <div id="map"></div>
      <a class="view-data" href='/visualize'>View data layers in Marine Planner</a>
    </div>
    <div class="scrolling-overlay">
      <div class="center">
        <div class="ocean-story-n">OCEAN STORY #{{ self.get_prev_siblings.count|add:1 }}</div>
        <div class="hook">This is an invitation to speak up about ocean planning.</div>
      </div>
      {% with page=self.get_prev_sibling %}
        {% if page %}
          <a class="previous-page" href="{% pageurl page %}">{% icon "caret-left" %}</a>
        {% endif %}
      {% endwith %}
      {% with page=self.get_next_sibling %}
        {% if page %}
          <a class="next-page" href="{% pageurl page %}">{% icon "caret-right" %}</a>
        {% endif %}
      {% endwith %}
    </div>
    <a href="#page-header" class="learn-more animate">learn more</a>
{% endblock %}

{% block content %}


  {% if self.sections %}
      {% for section in self.sections.all %}
          <a class="anchor" id="section-{{forloop.counter}}"></a>
          <section>
              <h2>{{ section.title }}</h2>
              {% if section.body %}
                {{ section.body|richtext }}
              {% endif %}
          </section>
      {% endfor %}
  {% endif %}
{% endblock %}

{% block extra_js %}
  <script src="{% static 'bower_components/ol3-unofficial/ol.js' %}"></script>
	<script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
  <script src="{% static 'portal/ocean_stories/ol3_map_engine.js' %}"></script>
  <script src="{% static 'portal/ocean_stories/hacky_marine_cadastre_layer_conversion.js' %}"></script>
  <script src="{% static 'portal/ocean_stories/scroll_spy.js' %}"></script>
  <script src="{% static 'portal/ocean_story.js' %}"></script>
  <script type="text/javascript">
    newOceanStory({{ self.as_json|safe }}, true);
  </script>
{% endblock %}
